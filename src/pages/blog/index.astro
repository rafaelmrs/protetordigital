---
import Layout from '../../layouts/Layout.astro';
import AdSense from '../../components/AdSense.astro';
import { getCollection } from 'astro:content';
const posts = (await getCollection('blog')).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---
<Layout title="Blog de SeguranÃ§a Digital â€” Dicas e ProteÃ§Ã£o Online" description="Artigos sobre ciberseguranÃ§a, privacidade, LGPD e proteÃ§Ã£o de dados para brasileiros. ConteÃºdo gratuito e atualizado semanalmente." url="https://protetordigital.com.br/blog">
  <div style="max-width:1100px;margin:0 auto;padding:32px 16px;">
    <nav style="margin-bottom:24px;" aria-label="breadcrumb">
      <ol style="display:flex;align-items:center;gap:8px;list-style:none;font-size:13px;color:var(--text-muted);font-family:var(--font-mono);">
        <li><a href="/" style="color:var(--text-muted);text-decoration:none;" onmouseover="this.style.color='var(--green)'" onmouseout="this.style.color='var(--text-muted)'">home</a></li>
        <li>/</li><li style="color:var(--green);">blog</li>
      </ol>
    </nav>
    <div style="margin-bottom:40px;">
      <p style="font-family:var(--font-mono);font-size:12px;color:var(--green);letter-spacing:0.1em;text-transform:uppercase;margin-bottom:8px;">> publicaÃ§Ãµes</p>
      <h1 class="font-display" style="font-size:clamp(1.8rem,4vw,2.4rem);font-weight:800;color:var(--text);letter-spacing:-0.03em;margin-bottom:10px;">Blog de SeguranÃ§a</h1>
      <p style="font-size:15px;color:var(--text-dim);">Artigos semanais sobre ciberseguranÃ§a e proteÃ§Ã£o digital para o brasileiro.</p>
    </div>
    <div style="display:grid;grid-template-columns:1fr;gap:24px;" id="blog-layout">
      <!-- Posts -->
      <div style="display:flex;flex-direction:column;gap:16px;">
        {posts.map((post, i) => (
          <>
            <a href={`/blog/${post.slug}`} class="card card-hover" style="text-decoration:none;display:block;padding:24px;transition:transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
              <div style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:14px;">
                {post.data.tags.slice(0,3).map(tag => <span class="tag tag-cyan">#{tag}</span>)}
                {post.data.featured && <span class="tag tag-green">â­ Destaque</span>}
              </div>
              <h2 class="font-display" style="font-size:1.15rem;font-weight:700;color:var(--text);margin-bottom:8px;letter-spacing:-0.01em;line-height:1.35;">{post.data.title}</h2>
              <p style="font-size:13px;color:var(--text-dim);line-height:1.6;margin-bottom:16px;">{post.data.description}</p>
              <div style="display:flex;justify-content:space-between;align-items:center;">
                <span style="font-size:12px;color:var(--text-muted);">âœï¸ {post.data.author}</span>
                <time style="font-family:var(--font-mono);font-size:12px;color:var(--text-muted);" datetime={post.data.pubDate.toISOString()}>
                  {post.data.pubDate.toLocaleDateString('pt-BR', { day:'2-digit', month:'long', year:'numeric' })}
                </time>
              </div>
            </a>
            {i === 1 && <AdSense slot="BETWEEN_RESULTS_SLOT_ID" format="auto" />}
          </>
        ))}
        {posts.length === 0 && (
          <div class="card" style="padding:48px;text-align:center;">
            <p style="font-size:40px;margin-bottom:12px;">ğŸ“</p>
            <p class="font-display" style="font-size:1.1rem;font-weight:700;color:var(--text);margin-bottom:8px;">Posts em breve!</p>
            <p style="font-size:14px;color:var(--text-dim);">Estamos preparando conteÃºdo sobre seguranÃ§a digital.</p>
          </div>
        )}
      </div>
      <!-- Sidebar -->
      <aside style="display:flex;flex-direction:column;gap:16px;" id="blog-sidebar">
        <AdSense slot="SIDEBAR_SLOT_ID" width={300} height={600} />
        <div class="card" style="padding:20px;border-color:rgba(255,109,0,0.25);">
          <h3 class="font-display" style="font-size:14px;font-weight:700;color:var(--text);margin-bottom:8px;">ğŸ“¡ RSS Feed</h3>
          <p style="font-size:13px;color:var(--text-dim);margin-bottom:14px;">Novos artigos no seu leitor preferido.</p>
          <a href="/rss.xml" class="btn-ghost" style="padding:10px 16px;font-size:13px;width:100%;justify-content:center;">Assinar RSS â†’</a>
        </div>
        <div class="card" style="padding:20px;">
          <h3 class="font-display" style="font-size:14px;font-weight:700;color:var(--text);margin-bottom:12px;">ğŸ·ï¸ TÃ³picos</h3>
          <div style="display:flex;flex-wrap:wrap;gap:6px;">
            {[...new Set(posts.flatMap(p => p.data.tags))].map(tag => <span class="tag">{tag}</span>)}
          </div>
        </div>
        <div class="card" style="padding:20px;background:rgba(0,230,118,0.04);border-color:rgba(0,230,118,0.2);">
          <h3 class="font-display" style="font-size:14px;font-weight:700;color:var(--text);margin-bottom:8px;">ğŸ›¡ï¸ Proteja-se Agora</h3>
          <p style="font-size:13px;color:var(--text-dim);margin-bottom:14px;">Use nossas ferramentas gratuitas.</p>
          <div style="display:flex;flex-direction:column;gap:8px;">
            <a href="/tools/senha" class="btn-primary" style="padding:10px 16px;font-size:13px;">ğŸ” Analisar Senha</a>
            <a href="/tools/vazamento" class="btn-ghost" style="padding:10px 16px;font-size:13px;justify-content:center;">ğŸ“§ Ver Vazamentos</a>
          </div>
        </div>
      </aside>
    </div>
  </div>
  <style>@media (min-width: 1024px) { #blog-layout { grid-template-columns: 1fr 300px !important; } }</style>
</Layout>
