---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);

const ADSENSE_ID = import.meta.env.PUBLIC_ADSENSE_ID;
---

<Layout
  title="Proteção Digital Gratuita para Brasileiros"
  description="Verifique se sua senha é segura, descubra se seu e-mail apareceu em vazamentos e analise links suspeitos. Ferramentas gratuitas, sem cadastro."
>

  <!-- HERO -->
  <section style="position:relative;overflow:hidden;padding:80px 0 96px;background:var(--bg);">
    <!-- Subtle grid bg -->
    <div aria-hidden="true" style="position:absolute;inset:0;background-image:linear-gradient(var(--border) 1px,transparent 1px),linear-gradient(90deg,var(--border) 1px,transparent 1px);background-size:48px 48px;opacity:0.3;pointer-events:none;"></div>
    <!-- Glow -->
    <div aria-hidden="true" style="position:absolute;top:-80px;left:50%;transform:translateX(-50%);width:900px;height:600px;background:radial-gradient(ellipse,rgba(59,130,246,0.06) 0%,transparent 65%);pointer-events:none;"></div>

    <div class="container" style="position:relative;text-align:center;">

      <!-- Status pill -->
      <div class="anim-up" style="display:inline-flex;align-items:center;gap:8px;background:var(--surface);border:1px solid var(--border-2);border-radius:100px;padding:5px 14px 5px 10px;margin-bottom:36px;">
        <span class="status-dot"></span>
        <span class="mono" style="font-size:12px;color:var(--text-2);">Todas as ferramentas operacionais</span>
      </div>

      <h1 class="anim-up delay-1" style="font-family:var(--font-body);font-size:clamp(2.4rem,6vw,4rem);font-weight:800;letter-spacing:-0.05em;line-height:1.05;color:var(--text);margin-bottom:24px;">
        Proteja o que é seu<br/>
        <span style="color:var(--blue);">online</span>
      </h1>

      <p class="anim-up delay-2" style="font-size:clamp(1rem,2.2vw,1.15rem);color:var(--text-2);max-width:500px;margin:0 auto 48px;line-height:1.7;">
        Ferramentas gratuitas para cuidar da sua segurança digital.<br/>
        <strong style="color:var(--text);font-weight:600;">Sem cadastro. Seus dados nunca saem do seu dispositivo.</strong>
      </p>

      <!-- CTA buttons -->
      <div class="anim-up delay-3" style="display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin-bottom:72px;">
        <a href="/tools/senha" class="btn btn-primary btn-lg">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" aria-hidden="true"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          Verificar minha senha
        </a>
        <a href="/tools/vazamento" class="btn btn-outline btn-lg">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/></svg>
          Meu e-mail vazou?
        </a>
      </div>

      <!-- Stats row -->
      <div class="anim-up delay-4" style="display:grid;grid-template-columns:repeat(2,1fr);gap:1px;background:var(--border);border:1px solid var(--border);border-radius:var(--radius-lg);overflow:hidden;max-width:560px;margin:0 auto;" id="stats-grid">
        {[
          { v: '15bi+', l: 'Senhas verificadas' },
          { v: 'Grátis', l: 'Para sempre' },
          { v: '100%', l: 'Privacidade local' },
          { v: 'LGPD', l: 'Dados protegidos' },
        ].map(({ v, l }) => (
          <div style="background:var(--surface);padding:20px 16px;text-align:center;">
            <div style="font-family:var(--font-body);font-size:1.6rem;font-weight:800;color:var(--blue);letter-spacing:-0.04em;">{v}</div>
            <div class="mono" style="font-size:11px;color:var(--text-3);margin-top:4px;">{l}</div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- TOOLS SECTION -->
  <section class="section" style="background:var(--bg-2);border-top:1px solid var(--border);" aria-labelledby="tools-heading">
    <div class="container">
      <div style="margin-bottom:48px;">
        <span class="badge badge-blue" style="margin-bottom:14px;display:inline-block;">Ferramentas gratuitas</span>
        <h2 id="tools-heading" style="font-family:var(--font-body);font-size:clamp(1.6rem,3.5vw,2.1rem);font-weight:800;color:var(--text);letter-spacing:-0.04em;margin-bottom:12px;">Três formas de se proteger</h2>
        <p style="font-size:15px;color:var(--text-2);max-width:480px;line-height:1.7;">Cada ferramenta cuida de um aspecto diferente da sua segurança online. Use todas.</p>
      </div>

      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:16px;">

        <!-- Senha -->
        <a href="/tools/senha" class="card card-hover" style="padding:28px;text-decoration:none;display:block;" aria-label="Abrir Verificação de Senhas">
          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:22px;">
            <div style="width:46px;height:46px;border-radius:var(--radius-md);background:rgba(59,130,246,0.1);border:1px solid rgba(59,130,246,0.2);display:flex;align-items:center;justify-content:center;color:var(--blue);">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
            </div>
            <span class="mono" style="font-size:11px;color:var(--blue);opacity:0.5;">01</span>
          </div>
          <h3 style="font-family:var(--font-body);font-size:1.1rem;font-weight:700;color:var(--text);margin-bottom:10px;letter-spacing:-0.02em;">Verificação de Senhas</h3>
          <p style="font-size:13px;color:var(--text-2);line-height:1.7;margin-bottom:18px;">Descubra em segundos se sua senha é fraca ou se já apareceu em algum vazamento. Também gera senhas seguras para você.</p>
          <div style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:20px;">
            <span class="badge">100% Local</span>
            <span class="badge badge-blue">15bi senhas</span>
          </div>
          <span style="font-family:var(--font-mono);font-size:12px;color:var(--blue);display:flex;align-items:center;gap:6px;">Abrir ferramenta <span aria-hidden="true">→</span></span>
        </a>

        <!-- URL -->
        <a href="/tools/link" class="card card-hover" style="padding:28px;text-decoration:none;display:block;" aria-label="Abrir Checagem de Links">
          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:22px;">
            <div style="width:46px;height:46px;border-radius:var(--radius-md);background:rgba(6,182,212,0.1);border:1px solid rgba(6,182,212,0.2);display:flex;align-items:center;justify-content:center;color:var(--cyan);">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
            </div>
            <span class="mono" style="font-size:11px;color:var(--cyan);opacity:0.5;">02</span>
          </div>
          <h3 style="font-family:var(--font-body);font-size:1.1rem;font-weight:700;color:var(--text);margin-bottom:10px;letter-spacing:-0.02em;">Checagem de Links</h3>
          <p style="font-size:13px;color:var(--text-2);line-height:1.7;margin-bottom:18px;">Antes de clicar em um link suspeito, verifique se é seguro. Detectamos golpes, vírus e páginas falsas em instantes.</p>
          <div style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:20px;">
            <span class="badge badge-cyan">Anti-phishing</span>
            <span class="badge">Google Safe Browsing</span>
          </div>
          <span style="font-family:var(--font-mono);font-size:12px;color:var(--cyan);display:flex;align-items:center;gap:6px;">Abrir ferramenta <span aria-hidden="true">→</span></span>
        </a>

        <!-- Vazamento -->
        <a href="/tools/vazamento" class="card card-hover" style="padding:28px;text-decoration:none;display:block;" aria-label="Abrir Busca de Vazamentos">
          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:22px;">
            <div style="width:46px;height:46px;border-radius:var(--radius-md);background:rgba(245,158,11,0.1);border:1px solid rgba(245,158,11,0.2);display:flex;align-items:center;justify-content:center;color:var(--amber);">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" aria-hidden="true"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/></svg>
            </div>
            <span class="mono" style="font-size:11px;color:var(--amber);opacity:0.5;">03</span>
          </div>
          <h3 style="font-family:var(--font-body);font-size:1.1rem;font-weight:700;color:var(--text);margin-bottom:10px;letter-spacing:-0.02em;">Busca de Vazamentos</h3>
          <p style="font-size:13px;color:var(--text-2);line-height:1.7;margin-bottom:18px;">Seu e-mail apareceu em algum vazamento de dados? Saiba agora e veja o que fazer para se proteger, com base na LGPD.</p>
          <div style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:20px;">
            <span class="badge badge-amber">LGPD</span>
            <span class="badge">700+ Vazamentos</span>
          </div>
          <span style="font-family:var(--font-mono);font-size:12px;color:var(--amber);display:flex;align-items:center;gap:6px;">Abrir ferramenta <span aria-hidden="true">→</span></span>
        </a>

      </div>
    </div>
  </section>

  <!-- ADSENSE MID PAGE -->
  {ADSENSE_ID && (
    <div style="padding:32px 20px;background:var(--bg);border-top:1px solid var(--border);display:flex;justify-content:center;">
      <ins class="adsbygoogle" style="display:block" data-ad-client={ADSENSE_ID} data-ad-slot="MID_PAGE_SLOT" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>
  )}

  <!-- BLOG POSTS -->
  {posts.length > 0 && (
    <section class="section" style="background:var(--bg);border-top:1px solid var(--border);" aria-labelledby="blog-heading">
      <div class="container">
        <div style="display:flex;justify-content:space-between;align-items:flex-end;margin-bottom:48px;flex-wrap:wrap;gap:16px;">
          <div>
            <span class="badge badge-cyan" style="margin-bottom:14px;display:inline-block;">Publicações recentes</span>
            <h2 id="blog-heading" style="font-family:var(--font-body);font-size:clamp(1.5rem,3.5vw,2rem);font-weight:800;color:var(--text);letter-spacing:-0.04em;">Blog de Segurança</h2>
          <p style="font-size:15px;color:var(--text-2);max-width:480px;line-height:1.7;margin-top:12px;">Artigos sobre cibersegurança e proteção digital para o brasileiro.</p>
          </div>
          <a href="/blog" style="font-family:var(--font-mono);font-size:13px;color:var(--blue);text-decoration:none;display:flex;align-items:center;gap:6px;" onmouseover="this.style.textDecoration='underline'" onmouseout="this.style.textDecoration='none'">
            Todos os artigos <span aria-hidden="true">→</span>
          </a>
        </div>

        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(290px,1fr));gap:16px;">
          {posts.map(post => (
            <a href={`/blog/${post.slug}`} class="card card-hover" style="text-decoration:none;display:flex;flex-direction:column;padding:24px;">
              <div style="display:flex;flex-wrap:wrap;gap:6px;margin-bottom:14px;">
                {post.data.tags.slice(0,2).map(tag => <span class="badge badge-cyan">#{tag}</span>)}
              </div>
              <h3 style="font-family:var(--font-body);font-size:1rem;font-weight:700;color:var(--text);margin-bottom:8px;line-height:1.4;letter-spacing:-0.02em;flex:1;">{post.data.title}</h3>
              <p style="font-size:13px;color:var(--text-2);line-height:1.65;margin-bottom:18px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;">{post.data.description}</p>
              <div style="display:flex;justify-content:space-between;align-items:center;">
                <span style="font-size:11px;color:var(--text-3);">{post.data.author}</span>
                <time class="mono" style="font-size:11px;color:var(--text-3);" datetime={post.data.pubDate.toISOString()}>
                  {post.data.pubDate.toLocaleDateString('pt-BR', { day:'2-digit', month:'short', year:'numeric' })}
                </time>
              </div>
            </a>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- WHY TRUST -->
  <section class="section" style="background:var(--bg-2);border-top:1px solid var(--border);" aria-labelledby="trust-heading">
    <div class="container">
      <div style="text-align:center;margin-bottom:56px;">
        <h2 id="trust-heading" style="font-family:var(--font-body);font-size:clamp(1.4rem,3vw,1.8rem);font-weight:800;color:var(--text);letter-spacing:-0.04em;margin-bottom:12px;">Por que confiar no Protetor Digital?</h2>
        <p style="font-size:14px;color:var(--text-2);max-width:400px;margin:0 auto;">Construído com os mais altos padrões de privacidade e segurança.</p>
      </div>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:16px;">
        {[
          {
            icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" aria-hidden="true"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>`,
            color: 'var(--blue)',
            title: 'Suas senhas ficam no seu dispositivo',
            desc: 'Nenhuma senha é enviada para nossos servidores. A análise acontece inteiramente no seu navegador.',
          },
          {
            icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" aria-hidden="true"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="m9 12 2 2 4-4"/></svg>`,
            color: 'var(--cyan)',
            title: 'Sem coleta de dados pessoais',
            desc: 'Não pedimos nome, CPF ou qualquer dado seu. Você usa as ferramentas de forma completamente anônima.',
          },
          {
            icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" aria-hidden="true"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>`,
            color: 'var(--emerald)',
            title: 'Em conformidade com a LGPD',
            desc: 'Sem rastreamento desnecessário. Não coletamos dados pessoais. Transparência total sobre o que fazemos.',
          },
          {
            icon: `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>`,
            color: 'var(--amber)',
            title: 'Sempre gratuito',
            desc: 'Ferramentas profissionais sem custo, sem cadastro obrigatório, para sempre.',
          },
        ].map(item => (
          <div class="card" style="padding:26px;">
            <div style={`width:42px;height:42px;border-radius:var(--radius-md);background:color-mix(in srgb, ${item.color} 10%, transparent);border:1px solid color-mix(in srgb, ${item.color} 20%, transparent);display:flex;align-items:center;justify-content:center;color:${item.color};margin-bottom:16px;`} set:html={item.icon}></div>
            <h3 style="font-family:var(--font-body);font-size:0.92rem;font-weight:700;color:var(--text);margin-bottom:8px;letter-spacing:-0.01em;line-height:1.4;">{item.title}</h3>
            <p style="font-size:13px;color:var(--text-2);line-height:1.7;">{item.desc}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- FAQ Schema -->
  <script type="application/ld+json">{JSON.stringify({
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      { "@type": "Question", "name": "O Protetor Digital é gratuito?", "acceptedAnswer": { "@type": "Answer", "text": "Sim, todas as ferramentas são 100% gratuitas e sem necessidade de cadastro." } },
      { "@type": "Question", "name": "Minha senha é enviada para algum servidor?", "acceptedAnswer": { "@type": "Answer", "text": "Não. A análise de senhas acontece inteiramente no seu dispositivo, sem nenhum envio de dados para nossos servidores." } },
      { "@type": "Question", "name": "O que é verificador de vazamentos?", "acceptedAnswer": { "@type": "Answer", "text": "É uma ferramenta que verifica se seu e-mail apareceu em vazamentos de dados de empresas hackeadas, usando o banco de dados Have I Been Pwned." } }
    ]
  })}</script>

  <style>
    @media (min-width: 600px) {
      #stats-grid { grid-template-columns: repeat(4,1fr) !important; }
    }
  </style>

</Layout>
