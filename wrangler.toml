# wrangler.toml — Configuração do Cloudflare Pages + Worker
# Documentação: https://developers.cloudflare.com/workers/wrangler/configuration/

name = "segurancaonline-worker"
main = "workers/worker.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = "dist"

# Cron trigger — atualiza Safe Browsing a cada 30 minutos
[triggers]
crons = ["*/30 * * * *"]

# KV Namespace — substitua o ID pelo seu após criar no dashboard
[[kv_namespaces]]
binding = "URL_SAFETY_KV"
id = "SUBSTITUA_PELO_ID_DO_KV"          # Pegar no Dashboard após criar o KV
preview_id = "SUBSTITUA_PELO_PREVIEW_ID"  # Para ambiente de preview

# Variáveis de ambiente (segredos são configurados pelo dashboard, não aqui)
# Vá em Workers → Settings → Variables → Add Variable
# Adicione: SAFE_BROWSING_API_KEY, XPOSEDORNOT_API_KEY, ALLOWED_ORIGIN

[env.production]
name = "segurancaonline-worker-prod"
